clear all
clc
addpath('../../../tools/matlab_bin/')

[Nsat,ERRsat] = satellite_error('../obs/satellite_obs.nc','lon','lat','time',...
'swh','../WORKDIR/ww3_ounf_OUTGRID/ww3_out_grd_OUTGRID.nc','longitude','latitude','time','hs')

[Nbuoy,ERRbuoy] = buoy_error('../obs/BUOY.nc','station_name','time',...
'wave_height','../WORKDIR/ww3_out_pnt_tab.nc','station_name','time','hs')

ErrTot=((Nsat*ERRsat)+(Nbuoy*ERRbuoy))/(Nsat+Nbuoy)
fileID = fopen('../INPUTDIR/Err','w');
fprintf(fileID,'%d\n',ErrTot);
fclose(fileID);
fileID = fopen('../WORKDIR/Err','w');
fprintf(fileID,'%d\n',ErrTot);
fclose(fileID);

% Normalize input variables
input_nml=importdata('../INPUTDIR/inp.nml');
input_upper_bound_nml=importdata('../INPUTDIR/inp_upper_bound.nml');
input_lower_bound_nml=importdata('../INPUTDIR/inp_lower_bound.nml');

for i=1:length(input_nml)
   [input_norm_nml(1,i)] = normalize(input_lower_bound_nml(i),input_upper_bound_nml(i),VMIN,VMAX,input_nml(i));
end

dlmwrite('inp_norm.nml',input_norm_nml,'Delimiter',' ','precision',6)




